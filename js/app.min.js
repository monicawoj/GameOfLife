!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e){document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector("#play"),e=document.querySelector("#pause");document.querySelector(".start").addEventListener("click",function(n){n.preventDefault();var r=document.querySelector("#width-set").value,s=document.querySelector("#height-set").value,o=new function(n,r){this.width=n,this.height=r,this.board=document.querySelector("#board"),this.blocks=[],this.numberCells=n*r,this.createBoard=function(){for(this.board.style.width=15*n+"px",this.board.style.height=15*r+"px",i=0;i<this.numberCells;i++){var t=document.createElement("div");this.blocks.push(t),this.board.appendChild(t)}this.blocks.forEach(function(t){t.addEventListener("click",function(e){-1===t.className.indexOf("live")?t.classList.add("live"):t.classList.remove("live")})})},this.blockIndex=function(t,e){return this.blocks[t+e*n]},this.setCellState=function(t,e,i){"live"===i?this.blockIndex(t,e).classList.add("live"):this.blockIndex(t,e).classList.remove("live")},this.firstGlider=function(){this.setCellState(0,2,"live"),this.setCellState(1,2,"live"),this.setCellState(2,2,"live"),this.setCellState(2,1,"live"),this.setCellState(1,0,"live")},this.neighborState=function(t,e){return void 0!==this.blockIndex(t,e)&&-1!==this.blockIndex(t,e).className.indexOf("live")?1:0},this.computeCellNextState=function(t,e){var i=[];i[0]=this.neighborState(t-1,e-1),i[1]=this.neighborState(t,e-1),i[2]=this.neighborState(t+1,e-1),i[3]=this.neighborState(t-1,e),i[4]=this.neighborState(t+1,e),i[5]=this.neighborState(t-1,e+1),i[6]=this.neighborState(t,e+1),i[7]=this.neighborState(t+1,e+1);var n=i.filter(function(t){return 1==t}).length;return-1===this.blockIndex(t,e).className.indexOf("live")?3===n?1:0:n<2?0:2===n||3===n?1:n>3?0:void 0},this.computeNextGeneration=function(){for(var t=[],e=0;e<this.height;e++)for(var i=0;i<this.width;i++)t.push(this.computeCellNextState(i,e));return t},this.printNextGeneration=function(){for(var t=this.computeNextGeneration(),e=0;e<t.length;e++)1===t[e]?this.blocks[e].classList.add("live"):this.blocks[e].classList.remove("live")};var s=this;t.addEventListener("click",function(t){s.intervalId=setInterval(function(){s.printNextGeneration()},500)}),e.addEventListener("click",function(t){clearInterval(s.intervalId)})}(parseInt(r),parseInt(s));o.createBoard(),o.firstGlider(),document.querySelector("#game-set").style.display="block"})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vanMvYXBwLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJwbGF5IiwicXVlcnlTZWxlY3RvciIsInBhdXNlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJXaWR0aCIsInVzZXJIZWlnaHQiLCJnYW1lIiwiYm9hcmRXaWR0aCIsImJvYXJkSGVpZ2h0IiwidGhpcyIsIndpZHRoIiwiaGVpZ2h0IiwiYm9hcmQiLCJibG9ja3MiLCJudW1iZXJDZWxscyIsImNyZWF0ZUJvYXJkIiwic3R5bGUiLCJibG9jayIsImNyZWF0ZUVsZW1lbnQiLCJwdXNoIiwiYXBwZW5kQ2hpbGQiLCJmb3JFYWNoIiwiZWxlbWVudCIsImNsYXNzTmFtZSIsImluZGV4T2YiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJibG9ja0luZGV4IiwieCIsInkiLCJzZXRDZWxsU3RhdGUiLCJzdGF0ZSIsImZpcnN0R2xpZGVyIiwibmVpZ2hib3JTdGF0ZSIsImNvbXB1dGVDZWxsTmV4dFN0YXRlIiwibmVpZ2hib3JzIiwibnVtYmVyTGl2ZU5laWdoYm9ycyIsImZpbHRlciIsImxlbmd0aCIsImNvbXB1dGVOZXh0R2VuZXJhdGlvbiIsIm5leHRHZW5lcmF0aW9uU3RhdGVzIiwiaiIsInByaW50TmV4dEdlbmVyYXRpb24iLCJuZXh0R2VuZXJhdGlvbkFycmF5Iiwic2VsZiIsImludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJwYXJzZUludCIsImRpc3BsYXkiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWpCLEdBQ0FZLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURrQixPQUFBLEtBSWpEcEIsRUFBQXFCLEVBQUEsU0FBQWxCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQW1CLFdBQ0EsV0FBMkIsT0FBQW5CLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFVLEVBQUFDLEdBQXNELE9BQUFWLE9BQUFXLFVBQUFDLGVBQUFuQixLQUFBZ0IsRUFBQUMsSUFHdER4QixFQUFBMkIsRUFBQSxHQUlBM0IsSUFBQTRCLEVBQUEsbUJDbkVBQyxTQUFBQyxpQkFBQSw4QkFFQSxJQUFBQyxFQUFBRixTQUFBRyxjQUFBLFNBQ0FDLEVBQUFKLFNBQUFHLGNBQUEsVUFDQUgsU0FBQUcsY0FBQSxVQWdJQUYsaUJBQUEsaUJBQUFJLEdBQ0FBLEVBQUFDLGlCQUNBLElBQUFDLEVBQUFQLFNBQUFHLGNBQUEsY0FBQVosTUFDQWlCLEVBQUFSLFNBQUFHLGNBQUEsZUFBQVosTUFDQWtCLEVBQUEsSUFsSUEsU0FBQUMsRUFBQUMsR0FDQUMsS0FBQUMsTUFBQUgsRUFDQUUsS0FBQUUsT0FBQUgsRUFDQUMsS0FBQUcsTUFBQWYsU0FBQUcsY0FBQSxVQUNBUyxLQUFBSSxVQUNBSixLQUFBSyxZQUFBUCxFQUFBQyxFQUNBQyxLQUFBTSxZQUFBLFdBR0EsSUFGQU4sS0FBQUcsTUFBQUksTUFBQU4sTUFBQSxHQUFBSCxFQUFBLEtBQ0FFLEtBQUFHLE1BQUFJLE1BQUFMLE9BQUEsR0FBQUgsRUFBQSxLQUNBcEMsRUFBQSxFQUFxQkEsRUFBQXFDLEtBQUFLLFlBQW9CMUMsSUFBQSxDQUN6QyxJQUFBNkMsRUFBQXBCLFNBQUFxQixjQUFBLE9BQ0FULEtBQUFJLE9BQUFNLEtBQUFGLEdBQ0FSLEtBQUFHLE1BQUFRLFlBQUFILEdBRUFSLEtBQUFJLE9BQUFRLFFBQUEsU0FBQUMsR0FDQUEsRUFBQXhCLGlCQUFBLGlCQUFBSSxJQUNBLElBQUFvQixFQUFBQyxVQUFBQyxRQUFBLFFBQ0FGLEVBQUFHLFVBQUFDLElBQUEsUUFFQUosRUFBQUcsVUFBQUUsT0FBQSxhQUtBbEIsS0FBQW1CLFdBQUEsU0FBQUMsRUFBQUMsR0FDQSxPQUFBckIsS0FBQUksT0FBQWdCLEVBQUFDLEVBQUF2QixJQUVBRSxLQUFBc0IsYUFBQSxTQUFBRixFQUFBQyxFQUFBRSxHQUNBLFNBQUFBLEVBQ0F2QixLQUFBbUIsV0FBQUMsRUFBQUMsR0FBQUwsVUFBQUMsSUFBQSxRQUVBakIsS0FBQW1CLFdBQUFDLEVBQUFDLEdBQUFMLFVBQUFFLE9BQUEsU0FHQWxCLEtBQUF3QixZQUFBLFdBQ0F4QixLQUFBc0IsYUFBQSxZQUNBdEIsS0FBQXNCLGFBQUEsWUFDQXRCLEtBQUFzQixhQUFBLFlBQ0F0QixLQUFBc0IsYUFBQSxZQUNBdEIsS0FBQXNCLGFBQUEsYUFFQXRCLEtBQUF5QixjQUFBLFNBQUFMLEVBQUFDLEdBQ0EsZ0JBQUFyQixLQUFBbUIsV0FBQUMsRUFBQUMsS0FDQSxJQUFBckIsS0FBQW1CLFdBQUFDLEVBQUFDLEdBQUFQLFVBQUFDLFFBQUEsUUFFQSxFQVFBLEdBR0FmLEtBQUEwQixxQkFBQSxTQUFBTixFQUFBQyxHQUNBLElBQUFNLEtBQ0FBLEVBQUEsR0FBQTNCLEtBQUF5QixjQUFBTCxFQUFBLEVBQUFDLEVBQUEsR0FDQU0sRUFBQSxHQUFBM0IsS0FBQXlCLGNBQUFMLEVBQUFDLEVBQUEsR0FDQU0sRUFBQSxHQUFBM0IsS0FBQXlCLGNBQUFMLEVBQUEsRUFBQUMsRUFBQSxHQUNBTSxFQUFBLEdBQUEzQixLQUFBeUIsY0FBQUwsRUFBQSxFQUFBQyxHQUNBTSxFQUFBLEdBQUEzQixLQUFBeUIsY0FBQUwsRUFBQSxFQUFBQyxHQUNBTSxFQUFBLEdBQUEzQixLQUFBeUIsY0FBQUwsRUFBQSxFQUFBQyxFQUFBLEdBQ0FNLEVBQUEsR0FBQTNCLEtBQUF5QixjQUFBTCxFQUFBQyxFQUFBLEdBQ0FNLEVBQUEsR0FBQTNCLEtBQUF5QixjQUFBTCxFQUFBLEVBQUFDLEVBQUEsR0FFQSxJQUFBTyxFQUFBRCxFQUFBRSxPQUFBLFNBQUFULEdBQW1FLFVBQUFBLElBQVlVLE9BRy9FLFdBQUE5QixLQUFBbUIsV0FBQUMsRUFBQUMsR0FBQVAsVUFBQUMsUUFBQSxRQWlCQSxJQUFBYSxFQUNBLEVBRUEsRUFsQkFBLEVBQUEsRUFDQSxFQUdBLElBQUFBLEdBQUEsSUFBQUEsRUFDQSxFQUdBQSxFQUFBLEVBQ0EsT0FEQSxHQWNBNUIsS0FBQStCLHNCQUFBLFdBRUEsSUFEQSxJQUFBQyxLQUNBckUsRUFBQSxFQUF5QkEsRUFBQXFDLEtBQUFFLE9BQWV2QyxJQUN4QyxRQUFBc0UsRUFBQSxFQUE2QkEsRUFBQWpDLEtBQUFDLE1BQWNnQyxJQUMzQ0QsRUFBQXRCLEtBQUFWLEtBQUEwQixxQkFBQU8sRUFBQXRFLElBR0EsT0FBQXFFLEdBRUFoQyxLQUFBa0Msb0JBQUEsV0FFQSxJQURBLElBQUFDLEVBQUFuQyxLQUFBK0Isd0JBQ0FwRSxFQUFBLEVBQXlCQSxFQUFBd0UsRUFBQUwsT0FBOEJuRSxJQUN2RCxJQUFBd0UsRUFBQXhFLEdBQ0FxQyxLQUFBSSxPQUFBekMsR0FBQXFELFVBQUFDLElBQUEsUUFFQWpCLEtBQUFJLE9BQUF6QyxHQUFBcUQsVUFBQUUsT0FBQSxTQUtBLElBQUFrQixFQUFBcEMsS0FDQVYsRUFBQUQsaUJBQUEsaUJBQUFJLEdBQ0EyQyxFQUFBQyxXQUFBQyxZQUFBLFdBQ0FGLEVBQUFGLHVCQUNhLE9BR2IxQyxFQUFBSCxpQkFBQSxpQkFBQUksR0FDQThDLGNBQUFILEVBQUFDLGNBUUEsQ0FBQUcsU0FBQTdDLEdBQUE2QyxTQUFBNUMsSUFDQUMsRUFBQVMsY0FDQVQsRUFBQTJCLGNBQ0FwQyxTQUFBRyxjQUFBLGFBQUFnQixNQUFBa0MsUUFBQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcblxuICAgIHZhciBwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsYXknKTtcbiAgICB2YXIgcGF1c2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGF1c2UnKTtcbiAgICB2YXIgc3RhcnRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3RhcnQnKTtcblxuICAgIHZhciBHYW1lT2ZMaWZlID0gZnVuY3Rpb24oYm9hcmRXaWR0aCwgYm9hcmRIZWlnaHQpIHtcbiAgICAgICAgdGhpcy53aWR0aCA9IGJvYXJkV2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gYm9hcmRIZWlnaHQ7XG4gICAgICAgIHRoaXMuYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9hcmQnKTtcbiAgICAgICAgdGhpcy5ibG9ja3MgPSBbXTtcbiAgICAgICAgdGhpcy5udW1iZXJDZWxscyA9IGJvYXJkV2lkdGggKiBib2FyZEhlaWdodDtcbiAgICAgICAgdGhpcy5jcmVhdGVCb2FyZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5ib2FyZC5zdHlsZS53aWR0aCA9IChib2FyZFdpZHRoICogMTUpICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMuYm9hcmQuc3R5bGUuaGVpZ2h0ID0gKGJvYXJkSGVpZ2h0ICogMTUpICsgJ3B4JztcbiAgICAgICAgICAgIGZvciAoaT0wOyBpPHRoaXMubnVtYmVyQ2VsbHM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ibG9ja3MucHVzaChibG9jayk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9hcmQuYXBwZW5kQ2hpbGQoYmxvY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmNsYXNzTmFtZS5pbmRleE9mKCdsaXZlJykgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2xpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnbGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5ibG9ja0luZGV4ID0gZnVuY3Rpb24oeCx5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ibG9ja3NbeCArICh5ICogYm9hcmRXaWR0aCldO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldENlbGxTdGF0ZSA9IGZ1bmN0aW9uKHgseSxzdGF0ZSkge1xuICAgICAgICAgICAgaWYgKHN0YXRlPT09J2xpdmUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ibG9ja0luZGV4KHgseSkuY2xhc3NMaXN0LmFkZCgnbGl2ZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrSW5kZXgoeCx5KS5jbGFzc0xpc3QucmVtb3ZlKCdsaXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmlyc3RHbGlkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q2VsbFN0YXRlKDAsMiwnbGl2ZScpO1xuICAgICAgICAgICAgdGhpcy5zZXRDZWxsU3RhdGUoMSwyLCdsaXZlJyk7XG4gICAgICAgICAgICB0aGlzLnNldENlbGxTdGF0ZSgyLDIsJ2xpdmUnKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q2VsbFN0YXRlKDIsMSwnbGl2ZScpO1xuICAgICAgICAgICAgdGhpcy5zZXRDZWxsU3RhdGUoMSwwLCdsaXZlJyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubmVpZ2hib3JTdGF0ZSA9IGZ1bmN0aW9uKHgseSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmJsb2NrSW5kZXgoeCx5KSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ibG9ja0luZGV4KHgseSkuY2xhc3NOYW1lLmluZGV4T2YoJ2xpdmUnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnMScpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCcwJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3VuZGVmaW5lZCBhbmQgMCcpO1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNvbXB1dGVDZWxsTmV4dFN0YXRlID0gZnVuY3Rpb24oeCx5KSB7XG4gICAgICAgICAgICB2YXIgbmVpZ2hib3JzID0gW107XG4gICAgICAgICAgICBuZWlnaGJvcnNbMF0gPSB0aGlzLm5laWdoYm9yU3RhdGUoeC0xLHktMSk7XG4gICAgICAgICAgICBuZWlnaGJvcnNbMV0gPSB0aGlzLm5laWdoYm9yU3RhdGUoeCx5LTEpO1xuICAgICAgICAgICAgbmVpZ2hib3JzWzJdID0gdGhpcy5uZWlnaGJvclN0YXRlKHgrMSx5LTEpO1xuICAgICAgICAgICAgbmVpZ2hib3JzWzNdID0gdGhpcy5uZWlnaGJvclN0YXRlKHgtMSx5KTtcbiAgICAgICAgICAgIG5laWdoYm9yc1s0XSA9IHRoaXMubmVpZ2hib3JTdGF0ZSh4KzEseSk7XG4gICAgICAgICAgICBuZWlnaGJvcnNbNV0gPSB0aGlzLm5laWdoYm9yU3RhdGUoeC0xLHkrMSk7XG4gICAgICAgICAgICBuZWlnaGJvcnNbNl0gPSB0aGlzLm5laWdoYm9yU3RhdGUoeCx5KzEpO1xuICAgICAgICAgICAgbmVpZ2hib3JzWzddID0gdGhpcy5uZWlnaGJvclN0YXRlKHgrMSx5KzEpO1xuXG4gICAgICAgICAgICB2YXIgbnVtYmVyTGl2ZU5laWdoYm9ycyA9IG5laWdoYm9ycy5maWx0ZXIoZnVuY3Rpb24oeCl7cmV0dXJuIHg9PTF9KS5sZW5ndGg7XG5cbiAgICAgICAgICAgIC8vaWYgY3VycmVudGx5IGFsaXZlXG4gICAgICAgICAgICBpZiAodGhpcy5ibG9ja0luZGV4KHgseSkuY2xhc3NOYW1lLmluZGV4T2YoJ2xpdmUnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAvL2lmIGxlc3MgdGhhbiB0d28gbmVpZ2hib3JzLCBkaWVzXG4gICAgICAgICAgICAgICAgaWYgKG51bWJlckxpdmVOZWlnaGJvcnMgPCAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyAvL2lmIHR3byBvciB0aHJlZSBuZWlnaGJvcnMsIGxpdmVzXG4gICAgICAgICAgICAgICAgaWYgKG51bWJlckxpdmVOZWlnaGJvcnMgPT09IDIgfHwgbnVtYmVyTGl2ZU5laWdoYm9ycyA9PT0gMykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9pZiBncmVhdGVyIHRoYW4gdGhyZWUgbmVpZ2hib3JzLCBkaWVzXG4gICAgICAgICAgICAgICAgaWYgKG51bWJlckxpdmVOZWlnaGJvcnMgPiAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vaWYgbm90IGN1cnJlbnRseSBhbGl2ZVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9pZiBleGFjdGx5IHRocmVlIG5laWdoYm9ycywgY29tZXMgYWxpdmVcbiAgICAgICAgICAgICAgICBpZiAobnVtYmVyTGl2ZU5laWdoYm9ycyA9PT0gMykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29tcHV0ZU5leHRHZW5lcmF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbmV4dEdlbmVyYXRpb25TdGF0ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTx0aGlzLmhlaWdodDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaj0wOyBqPHRoaXMud2lkdGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBuZXh0R2VuZXJhdGlvblN0YXRlcy5wdXNoKHRoaXMuY29tcHV0ZUNlbGxOZXh0U3RhdGUoaixpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5leHRHZW5lcmF0aW9uU3RhdGVzO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaW50TmV4dEdlbmVyYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBuZXh0R2VuZXJhdGlvbkFycmF5ID0gdGhpcy5jb21wdXRlTmV4dEdlbmVyYXRpb24oKTtcbiAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxuZXh0R2VuZXJhdGlvbkFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRHZW5lcmF0aW9uQXJyYXlbaV0gPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ibG9ja3NbaV0uY2xhc3NMaXN0LmFkZCgnbGl2ZScpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2xpdmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHNlbGYuaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNlbGYucHJpbnROZXh0R2VuZXJhdGlvbigpO1xuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcGF1c2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLmludGVydmFsSWQpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgc3RhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgdXNlcldpZHRoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dpZHRoLXNldCcpLnZhbHVlO1xuICAgICAgICB2YXIgdXNlckhlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoZWlnaHQtc2V0JykudmFsdWU7XG4gICAgICAgIHZhciBnYW1lID0gbmV3IEdhbWVPZkxpZmUocGFyc2VJbnQodXNlcldpZHRoKSxwYXJzZUludCh1c2VySGVpZ2h0KSk7XG4gICAgICAgIGdhbWUuY3JlYXRlQm9hcmQoKTtcbiAgICAgICAgZ2FtZS5maXJzdEdsaWRlcigpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2FtZS1zZXQnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9KTtcbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=